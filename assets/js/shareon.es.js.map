{"version":3,"file":"shareon.es.js","sources":["../src/shareon.js","../src/index.js"],"sourcesContent":["// prettier-ignore\n/**\n * Map of social networks to their respective URL builders.\n *\n * The `d` argument of each builder is the object with the page metadata, such\n * as page title, URL, author name, etc.\n *\n * @type {{ [network: string]: (d: {\n *   url: string,\n *   title?: string,\n *   media?: string,\n *   text?: string,\n *   via?: string,\n *   fbAppId?: string\n * }) => string}}\n */\nconst urlBuilderMap = {\n  facebook: (d) => `https://www.facebook.com/sharer/sharer.php?u=${d.url}`,\n  linkedin: (d) => `https://www.linkedin.com/sharing/share-offsite/?url=${d.url}`,\n  mastodon: (d) => `https://toot.kytta.dev/?text=${d.title}%0D%0A${d.url}${d.text ? `%0D%0A%0D%0A${d.text}` : ''}${d.via ? `%0D%0A%0D%0A${d.via}` : ''}`,\n  messenger: (d) => `https://www.facebook.com/dialog/send?app_id=${d.fbAppId}&link=${d.url}&redirect_uri=${d.url}`,\n  odnoklassniki: (d) => `https://connect.ok.ru/offer?url=${d.url}&title=${d.title}${d.media ? `&imageUrl=${d.media}` : ''}`,\n  pinterest: (d) => `https://pinterest.com/pin/create/button/?url=${d.url}&description=${d.title}${d.media ? `&media=${d.media}` : ''}`,\n  pocket: (d) => `https://getpocket.com/edit.php?url=${d.url}`,\n  reddit: (d) => `https://www.reddit.com/submit?title=${d.title}&url=${d.url}`,\n  telegram: (d) => `https://telegram.me/share/url?url=${d.url}${d.text ? `&text=${d.text}` : ''}`,\n  twitter: (d) => `https://twitter.com/intent/tweet?url=${d.url}&text=${d.title}${d.via ? `&via=${d.via}` : ''}`,\n  viber: (d) => `viber://forward?text=${d.title}%0D%0A${d.url}${d.text ? `%0D%0A%0D%0A${d.text}` : ''}`,\n  vkontakte: (d) => `https://vk.com/share.php?url=${d.url}&title=${d.title}${d.media ? `&image=${d.media}` : ''}`,\n  whatsapp: (d) => `https://wa.me/?text=${d.title}%0D%0A${d.url}${d.text ? `%0D%0A%0D%0A${d.text}` : ''}`,\n};\n\nconst openUrl = (buttonUrl) => () => {\n  window.open(buttonUrl, \"_blank\", \"noopener,noreferrer\");\n};\n\nconst init = () => {\n  const shareonContainers = document.querySelectorAll(\".shareon\");\n\n  // iterate over <div class=\"shareon\">\n  for (const container of shareonContainers) {\n    // iterate over children of <div class=\"shareon\">\n    for (const child of container.children) {\n      if (child) {\n        const classListLength = child.classList.length;\n\n        // iterate over classes of the child element\n        for (let k = 0; k < classListLength; k += 1) {\n          const cls = child.classList.item(k);\n\n          // if it's one of the networks\n          if (Object.prototype.hasOwnProperty.call(urlBuilderMap, cls)) {\n            const preset = {\n              url: encodeURIComponent(\n                child.dataset.url ||\n                  container.dataset.url ||\n                  window.location.href\n              ),\n              title: encodeURIComponent(\n                child.dataset.title || container.dataset.title || document.title\n              ),\n              media: encodeURIComponent(\n                child.dataset.media || container.dataset.media || \"\"\n              ),\n              text: encodeURIComponent(\n                child.dataset.text || container.dataset.text || \"\"\n              ),\n              via: encodeURIComponent(\n                child.dataset.via || container.dataset.via || \"\"\n              ),\n              fbAppId: encodeURIComponent(\n                child.dataset.fbAppId || container.dataset.fbAppId || \"\"\n              ),\n            };\n            const url = urlBuilderMap[cls](preset);\n\n            if (child.tagName.toLowerCase() === \"a\") {\n              child.setAttribute(\"href\", url);\n              child.setAttribute(\"rel\", \"noopener noreferrer\");\n              child.setAttribute(\"target\", \"_blank\");\n            } else {\n              child.addEventListener(\"click\", openUrl(url));\n            }\n\n            break; // once a network is detected we don't want to check further\n          }\n        }\n      }\n    }\n  }\n};\n\nexport { init };\n","import { init } from \"./shareon\";\n\nconst s = document.currentScript;\nif (s && s.hasAttribute(\"init\")) {\n  init();\n}\n\nexport { init } from \"./shareon\";\n"],"names":["urlBuilderMap","d","openUrl","buttonUrl","init","shareonContainers","container","child","classListLength","k","cls","preset","url","s"],"mappings":"qBAgBA,MAAMA,EAAgB,CACpB,SAAWC,GAAM,gDAAgDA,EAAE,MACnE,SAAWA,GAAM,uDAAuDA,EAAE,MAC1E,SAAWA,GAAM,gCAAgCA,EAAE,cAAcA,EAAE,MAAMA,EAAE,KAAO,eAAeA,EAAE,OAAS,KAAKA,EAAE,IAAM,eAAeA,EAAE,MAAQ,KAClJ,UAAYA,GAAM,+CAA+CA,EAAE,gBAAgBA,EAAE,oBAAoBA,EAAE,MAC3G,cAAgBA,GAAM,mCAAmCA,EAAE,aAAaA,EAAE,QAAQA,EAAE,MAAQ,aAAaA,EAAE,QAAU,KACrH,UAAYA,GAAM,gDAAgDA,EAAE,mBAAmBA,EAAE,QAAQA,EAAE,MAAQ,UAAUA,EAAE,QAAU,KACjI,OAASA,GAAM,sCAAsCA,EAAE,MACvD,OAASA,GAAM,uCAAuCA,EAAE,aAAaA,EAAE,MACvE,SAAWA,GAAM,qCAAqCA,EAAE,MAAMA,EAAE,KAAO,SAASA,EAAE,OAAS,KAC3F,QAAUA,GAAM,wCAAwCA,EAAE,YAAYA,EAAE,QAAQA,EAAE,IAAM,QAAQA,EAAE,MAAQ,KAC1G,MAAQA,GAAM,wBAAwBA,EAAE,cAAcA,EAAE,MAAMA,EAAE,KAAO,eAAeA,EAAE,OAAS,KACjG,UAAYA,GAAM,gCAAgCA,EAAE,aAAaA,EAAE,QAAQA,EAAE,MAAQ,UAAUA,EAAE,QAAU,KAC3G,SAAWA,GAAM,uBAAuBA,EAAE,cAAcA,EAAE,MAAMA,EAAE,KAAO,eAAeA,EAAE,OAAS,IACrG,EAEMC,EAAWC,GAAc,IAAM,CACnC,OAAO,KAAKA,EAAW,SAAU,qBAAqB,CACxD,EAEMC,EAAO,IAAM,CACjB,MAAMC,EAAoB,SAAS,iBAAiB,UAAU,EAG9D,UAAWC,KAAaD,EAEtB,UAAWE,KAASD,EAAU,SAC5B,GAAIC,EAAO,CACT,MAAMC,EAAkBD,EAAM,UAAU,OAGxC,QAASE,EAAI,EAAGA,EAAID,EAAiBC,GAAK,EAAG,CAC3C,MAAMC,EAAMH,EAAM,UAAU,KAAKE,CAAC,EAGlC,GAAI,OAAO,UAAU,eAAe,KAAKT,EAAeU,CAAG,EAAG,CAC5D,MAAMC,EAAS,CACb,IAAK,mBACHJ,EAAM,QAAQ,KACZD,EAAU,QAAQ,KAClB,OAAO,SAAS,IACnB,EACD,MAAO,mBACLC,EAAM,QAAQ,OAASD,EAAU,QAAQ,OAAS,SAAS,KAC5D,EACD,MAAO,mBACLC,EAAM,QAAQ,OAASD,EAAU,QAAQ,OAAS,EACnD,EACD,KAAM,mBACJC,EAAM,QAAQ,MAAQD,EAAU,QAAQ,MAAQ,EACjD,EACD,IAAK,mBACHC,EAAM,QAAQ,KAAOD,EAAU,QAAQ,KAAO,EAC/C,EACD,QAAS,mBACPC,EAAM,QAAQ,SAAWD,EAAU,QAAQ,SAAW,EACvD,CACf,EACkBM,EAAMZ,EAAcU,GAAKC,CAAM,EAEjCJ,EAAM,QAAQ,YAAW,IAAO,KAClCA,EAAM,aAAa,OAAQK,CAAG,EAC9BL,EAAM,aAAa,MAAO,qBAAqB,EAC/CA,EAAM,aAAa,SAAU,QAAQ,GAErCA,EAAM,iBAAiB,QAASL,EAAQU,CAAG,CAAC,EAG9C,KACD,CACF,CACF,CAGP,ECxFMC,EAAI,SAAS,cACfA,GAAKA,EAAE,aAAa,MAAM,GAC5BT"}